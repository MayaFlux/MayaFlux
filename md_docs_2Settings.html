<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MayaFlux: MayaFlux &lt;tt&gt;settings()&lt;/tt&gt; - Engine Configuration Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MayaFlux<span id="projectnumber">&#160;0.2.0</span>
   </div>
   <div id="projectbrief">Digital-First Multimedia Processing Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2Settings.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">MayaFlux &lt;tt&gt;settings()&lt;/tt&gt; - Engine Configuration Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md292"></a> </p>
<h1><a class="anchor" id="autotoc_md293"></a>
Overview</h1>
<p>The <code>settings()</code> function is your <b>single entry point for configuring the <a class="el" href="namespaceMayaFlux.html" title="Main namespace for the Maya Flux audio engine.">MayaFlux</a> engine before it starts</b>. Think of it like opening <b>Preferences</b> in your DAW—you set up the environment once, and these settings are locked in when the engine initializes.</p>
<p>Once <code><a class="el" href="namespaceMayaFlux_a7d2ef01625e07aeb15550318d3cfb708.html#a7d2ef01625e07aeb15550318d3cfb708" title="Initializes the default engine with default settings.">MayaFlux::Init()</a></code> is called (which happens automatically in the default <code><a class="el" href="main_8cpp.html">main.cpp</a></code>), these settings take effect and generally cannot be changed without restarting the engine.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md295"></a>
Two Configuration Levels</h1>
<h2><a class="anchor" id="autotoc_md296"></a>
1. &lt;strong&gt;Audio Stream Configuration&lt;/strong&gt; (GlobalStreamInfo)</h2>
<p>Controls how audio I/O behaves: sample rate, buffer size, input/output channels.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line"> </div>
<div class="line">    stream.sample_rate = 48000;        <span class="comment">// Hz (44100, 48000, 96000, etc.)</span></div>
<div class="line">    stream.buffer_size = 512;          <span class="comment">// Frames per buffer (64, 128, 256, 512, 1024, etc.)</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Output configuration (to speakers/DAC)</span></div>
<div class="line">    stream.output.channels = 2;        <span class="comment">// Stereo</span></div>
<div class="line">    stream.output.format = stream.output.format; <span class="comment">// Leave as-is unless you know what you&#39;re doing</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Input configuration (from microphone/ADC)</span></div>
<div class="line">    stream.input.channels = 2;         <span class="comment">// Stereo in</span></div>
<div class="line">    stream.input.enabled = <span class="keyword">true</span>;       <span class="comment">// Enable audio input</span></div>
<div class="line">}</div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518_html_add02a960f8fdc0d03e7d4c0aa3c2b518"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a></div><div class="ttdeci">Core::GlobalStreamInfo &amp; get_global_stream_info()</div><div class="ttdoc">Gets the stream configuration from the default engine.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00019">Config.cpp:19</a></div></div>
</div><!-- fragment --><p><b>Key Parameters:</b></p>
<ul>
<li><b>sample_rate</b>: Higher = better frequency response, more CPU. Typical: 44100 Hz (CD) or 48000 Hz (pro audio)</li>
<li><b>buffer_size</b>: Lower = lower latency but more CPU overhead. Typical: 256–1024 frames</li>
<li><b>output.channels</b>: Mono (1), Stereo (2), surround (&gt;2)</li>
<li><b>input.enabled / input.channels</b>: Leave disabled if you don't need mic input</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md298"></a>
2. &lt;strong&gt;Graphics Configuration&lt;/strong&gt; (GlobalGraphicsConfig)</h2>
<p>Controls windowing, rendering backend, frame rate, and GPU settings.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; graphics = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Windowing backend</span></div>
<div class="line">    graphics.windowing_backend = graphics.WindowingBackend::GLFW; <span class="comment">// GLFW, SDL, NATIVE, or NONE</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Graphics API</span></div>
<div class="line">    graphics.requested_api = graphics.GraphicsApi::VULKAN;  <span class="comment">// VULKAN, OPENGL, METAL, DIRECTX12</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Frame rate</span></div>
<div class="line">    graphics.target_frame_rate = 60;  <span class="comment">// Hz (60, 120, 144, etc.)</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Surface appearance</span></div>
<div class="line">    graphics.surface_info.format = graphics.surface_info.SurfaceFormat::R8G8B8A8_SRGB;</div>
<div class="line">    graphics.surface_info.color_space = graphics.surface_info.ColorSpace::SRGB_NONLINEAR;</div>
<div class="line">    graphics.surface_info.present_mode = graphics.surface_info.PresentMode::FIFO;  <span class="comment">// Vsync</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// GPU resource limits</span></div>
<div class="line">    graphics.resource_limits.max_windows = 4;</div>
<div class="line">    graphics.resource_limits.max_texture_cache_mb = 2048;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4_html_a1df79fdf780d55f831e3eb7e09733fe4"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a></div><div class="ttdeci">Core::GlobalGraphicsConfig &amp; get_global_graphics_config()</div><div class="ttdoc">Gets the graphics configuration from the default engine.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00027">Config.cpp:27</a></div></div>
</div><!-- fragment --><p><b>Key Parameters:</b></p>
<ul>
<li><b>windowing_backend</b>: GLFW (cross-platform default), SDL, platform-native, or NONE (offscreen only)</li>
<li><b>requested_api</b>: Vulkan (modern, default), OpenGL (compatibility), Metal (macOS), DirectX12 (Windows)</li>
<li><b>target_frame_rate</b>: Sync visual processing to this rate (60 Hz typical)</li>
<li><b>surface_info.present_mode</b>:<ul>
<li><code>FIFO</code> = Vsync enabled (smooth, no tearing)</li>
<li><code>IMMEDIATE</code> = No Vsync (lower latency, possible tearing)</li>
<li><code>MAILBOX</code> = Triple buffering (best of both)</li>
</ul>
</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md300"></a>
3. &lt;strong&gt;Node Graph Semantics&lt;/strong&gt; (Rarely needed)</h2>
<p>Controls how nodes behave when connected.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; graph = MayaFlux::Config::get_graph_config();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// How nodes handle connections (usually leave as default)</span></div>
<div class="line">    <span class="comment">// graph.chain_semantics = MayaFlux::NodeChainSemantics::REPLACE_TARGET;</span></div>
<div class="line">    <span class="comment">// graph.binary_op_semantics = MayaFlux::NodeBinaryOpSemantics::REPLACE;</span></div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md302"></a>
4. &lt;strong&gt;Logging / Journal&lt;/strong&gt;</h2>
<p>Control how much the engine logs and where logs go.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="comment">// Log everything (verbose debugging)</span></div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_ab127e81fe5c30eea2ed3fbf5f6c8da30.html#ab127e81fe5c30eea2ed3fbf5f6c8da30">MayaFlux::Config::set_journal_severity</a>(<a class="code hl_enumvalue" href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a2d3e4144aa384b18849ab9a8abad74d6">MayaFlux::Journal::Severity::TRACE</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Or only warnings and errors</span></div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_ab127e81fe5c30eea2ed3fbf5f6c8da30.html#ab127e81fe5c30eea2ed3fbf5f6c8da30">MayaFlux::Config::set_journal_severity</a>(<a class="code hl_enumvalue" href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a32bd8a1db2275458673903bdb84cb277">MayaFlux::Journal::Severity::WARN</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Output logs to console in real-time</span></div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_acbb1cccf0d87301df74cdfbabd681ac9.html#acbb1cccf0d87301df74cdfbabd681ac9">MayaFlux::Config::sink_journal_to_console</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Or save logs to a file</span></div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_aaf8d14451b8ad0864f0c0d7ea315a2c9.html#aaf8d14451b8ad0864f0c0d7ea315a2c9">MayaFlux::Config::store_journal_entries</a>(<span class="stringliteral">&quot;mayaflux.log&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_aaf8d14451b8ad0864f0c0d7ea315a2c9_html_aaf8d14451b8ad0864f0c0d7ea315a2c9"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_aaf8d14451b8ad0864f0c0d7ea315a2c9.html#aaf8d14451b8ad0864f0c0d7ea315a2c9">MayaFlux::Config::store_journal_entries</a></div><div class="ttdeci">void store_journal_entries(const std::string &amp;file_name)</div><div class="ttdoc">Stores journal entries to a file by adding a FileSink to the Archivist.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00077">Config.cpp:77</a></div></div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_ab127e81fe5c30eea2ed3fbf5f6c8da30_html_ab127e81fe5c30eea2ed3fbf5f6c8da30"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_ab127e81fe5c30eea2ed3fbf5f6c8da30.html#ab127e81fe5c30eea2ed3fbf5f6c8da30">MayaFlux::Config::set_journal_severity</a></div><div class="ttdeci">void set_journal_severity(Journal::Severity severity)</div><div class="ttdoc">Sets the minimum severity level for journal entries to be logged.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00072">Config.cpp:72</a></div></div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_acbb1cccf0d87301df74cdfbabd681ac9_html_acbb1cccf0d87301df74cdfbabd681ac9"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_acbb1cccf0d87301df74cdfbabd681ac9.html#acbb1cccf0d87301df74cdfbabd681ac9">MayaFlux::Config::sink_journal_to_console</a></div><div class="ttdeci">void sink_journal_to_console()</div><div class="ttdoc">Outputs journal entries to the console by adding a ConsoleSink to the Archivist NOTE: This records th...</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00083">Config.cpp:83</a></div></div>
<div class="ttc" id="anamespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380_html_afe86ec3bf827a1f9336dea9ab1c52380a2d3e4144aa384b18849ab9a8abad74d6"><div class="ttname"><a href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a2d3e4144aa384b18849ab9a8abad74d6">MayaFlux::Journal::Severity::TRACE</a></div><div class="ttdeci">@ TRACE</div></div>
<div class="ttc" id="anamespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380_html_afe86ec3bf827a1f9336dea9ab1c52380a32bd8a1db2275458673903bdb84cb277"><div class="ttname"><a href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a32bd8a1db2275458673903bdb84cb277">MayaFlux::Journal::Severity::WARN</a></div><div class="ttdeci">@ WARN</div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md304"></a>
Common Scenarios</h1>
<h2><a class="anchor" id="autotoc_md305"></a>
Scenario 1: Simple Audio (Default)</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="comment">// Defaults are fine for most uses:</span></div>
<div class="line">    <span class="comment">// - 48 kHz, stereo out, 512 sample buffer</span></div>
<div class="line">    <span class="comment">// - Vulkan graphics, 60 FPS</span></div>
<div class="line">    <span class="comment">// - Minimal logging</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Just leave empty or add logging for debugging:</span></div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_ab127e81fe5c30eea2ed3fbf5f6c8da30.html#ab127e81fe5c30eea2ed3fbf5f6c8da30">MayaFlux::Config::set_journal_severity</a>(<a class="code hl_enumvalue" href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a551b723eafd6a31d444fcb2f5920fbd3">MayaFlux::Journal::Severity::INFO</a>);</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380_html_afe86ec3bf827a1f9336dea9ab1c52380a551b723eafd6a31d444fcb2f5920fbd3"><div class="ttname"><a href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a551b723eafd6a31d444fcb2f5920fbd3">MayaFlux::Journal::Severity::INFO</a></div><div class="ttdeci">@ INFO</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md306"></a>
Scenario 2: Low-Latency Real-Time (Music Performance)</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line">    stream.sample_rate = 48000;</div>
<div class="line">    stream.buffer_size = 128;  <span class="comment">// Low latency (2.6 ms at 48 kHz)</span></div>
<div class="line">    stream.output.channels = 2;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span>&amp; graphics = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a>();</div>
<div class="line">    graphics.target_frame_rate = 120;  <span class="comment">// Smooth visuals</span></div>
<div class="line">    graphics.surface_info.present_mode =</div>
<div class="line">        graphics.surface_info.PresentMode::IMMEDIATE;  <span class="comment">// No vsync for responsiveness</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md307"></a>
Scenario 3: Studio Recording (High Quality)</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line">    stream.sample_rate = 96000;  <span class="comment">// Studio quality</span></div>
<div class="line">    stream.buffer_size = 1024;   <span class="comment">// Can afford latency</span></div>
<div class="line">    stream.input.enabled = <span class="keyword">true</span>;</div>
<div class="line">    stream.input.channels = 2;   <span class="comment">// Mic input</span></div>
<div class="line">    stream.output.channels = 2;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_ab127e81fe5c30eea2ed3fbf5f6c8da30.html#ab127e81fe5c30eea2ed3fbf5f6c8da30">MayaFlux::Config::set_journal_severity</a>(<a class="code hl_enumvalue" href="namespaceMayaFlux_1_1Journal_afe86ec3bf827a1f9336dea9ab1c52380.html#afe86ec3bf827a1f9336dea9ab1c52380a2d3e4144aa384b18849ab9a8abad74d6">MayaFlux::Journal::Severity::TRACE</a>);</div>
<div class="line">    <a class="code hl_function" href="namespaceMayaFlux_1_1Config_aaf8d14451b8ad0864f0c0d7ea315a2c9.html#aaf8d14451b8ad0864f0c0d7ea315a2c9">MayaFlux::Config::store_journal_entries</a>(<span class="stringliteral">&quot;studio_session.log&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md308"></a>
Scenario 4: Headless / Offline Processing (No Graphics)</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line">    stream.sample_rate = 44100;</div>
<div class="line">    stream.buffer_size = 2048;  <span class="comment">// Larger buffer for batch processing</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span>&amp; graphics = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a>();</div>
<div class="line">    graphics.windowing_backend = graphics.WindowingBackend::NONE;  <span class="comment">// No window</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md309"></a>
Scenario 5: Linux with Wayland (Platform-Specific)</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">auto</span>&amp; graphics = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a>();</div>
<div class="line">    graphics.glfw_preinit_config.platform = graphics.glfw_preinit_config.Platform::Wayland;</div>
<div class="line">    graphics.glfw_preinit_config.disable_libdecor = <span class="keyword">true</span>;  <span class="comment">// Avoid crashes on some Wayland</span></div>
<div class="line"> </div>
<div class="line">    graphics.surface_info.present_mode = graphics.surface_info.PresentMode::MAILBOX;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md311"></a>
Important Notes</h1>
<ol type="1">
<li><b>Timing</b>: <code>settings()</code> runs <em>before</em> <code><a class="el" href="namespaceMayaFlux_a7d2ef01625e07aeb15550318d3cfb708.html#a7d2ef01625e07aeb15550318d3cfb708" title="Initializes the default engine with default settings.">MayaFlux::Init()</a></code> in your <code><a class="el" href="main_8cpp.html">main.cpp</a></code>. Changes made here take effect when the engine initializes.</li>
<li><b>No Runtime Changes</b>: Once <code>Init()</code> is called, these settings are essentially locked. Don't try to change them during <code>compose()</code> or during playback—they won't take effect until the next restart.</li>
<li><b>Defaults are Reasonable</b>: If you don't touch <code>settings()</code>, <a class="el" href="namespaceMayaFlux.html" title="Main namespace for the Maya Flux audio engine.">MayaFlux</a> uses sensible defaults:<ul>
<li>48 kHz, stereo, 512 sample buffer (audio)</li>
<li>Vulkan, 60 FPS, SRGB surface (graphics)</li>
<li>Minimal logging</li>
</ul>
</li>
<li><p class="startli"><b>Advanced Users</b>: If you need even finer control, access the raw config structs directly:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line"><span class="keyword">auto</span>&amp; graphics = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a>();</div>
<div class="line"><span class="comment">// Modify whatever you need</span></div>
</div><!-- fragment --></li>
<li><b>This is C++</b>: You can use loops, conditionals, environment variables, config files—whatever makes sense: <div class="fragment"><div class="line"><span class="keywordtype">void</span> settings() {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* env_sr = std::getenv(<span class="stringliteral">&quot;MAYAFLUX_SAMPLE_RATE&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (env_sr) {</div>
<div class="line">        <span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line">        stream.sample_rate = std::stoi(env_sr);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md313"></a>
Full Example: user_project.hpp</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="MayaFlux_8hpp.html">MayaFlux/MayaFlux.hpp</a>&quot;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Configure the MayaFlux engine (sample rate, buffer size, graphics backend, etc.)</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This runs BEFORE MayaFlux::Init(). Use this to set preferences like you would</span></div>
<div class="line"><span class="comment"> * in a DAW&#39;s Preferences menu. Leave empty to use sensible defaults.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Once Init() is called, these settings take effect and persist until shutdown.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> settings()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Configure audio</span></div>
<div class="line">    <span class="keyword">auto</span>&amp; stream = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_add02a960f8fdc0d03e7d4c0aa3c2b518.html#add02a960f8fdc0d03e7d4c0aa3c2b518">MayaFlux::Config::get_global_stream_info</a>();</div>
<div class="line">    stream.sample_rate = 48000;</div>
<div class="line">    stream.buffer_size = 512;</div>
<div class="line">    stream.output.channels = 2;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configure graphics</span></div>
<div class="line">    <span class="keyword">auto</span>&amp; graphics = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a1df79fdf780d55f831e3eb7e09733fe4.html#a1df79fdf780d55f831e3eb7e09733fe4">MayaFlux::Config::get_global_graphics_config</a>();</div>
<div class="line">    graphics.target_frame_rate = 60;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Enable logging for debugging</span></div>
<div class="line">    <span class="comment">// MayaFlux::Config::set_journal_severity(MayaFlux::Journal::Severity::TRACE);</span></div>
<div class="line">    <span class="comment">// MayaFlux::Config::sink_journal_to_console();</span></div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Create and register your DSP nodes, buffers, and coroutines here.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This runs AFTER MayaFlux::Init() but BEFORE MayaFlux::Start().</span></div>
<div class="line"><span class="comment"> * Everything you register here persists for the lifetime of the engine.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> compose()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Example: create a simple sine oscillator</span></div>
<div class="line">    <span class="comment">// vega.sine(440).channel(0) | Audio;</span></div>
<div class="line">}</div>
<div class="ttc" id="aMayaFlux_8hpp_html"><div class="ttname"><a href="MayaFlux_8hpp.html">MayaFlux.hpp</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md315"></a>
Accessing Configuration Later</h1>
<p>From within <code>compose()</code> or anywhere in your code, you can <em>read</em> the current configuration:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> compose() {</div>
<div class="line">    uint32_t sr = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_ad8c6968db02415b5ba48863063076989.html#ad8c6968db02415b5ba48863063076989">MayaFlux::Config::get_sample_rate</a>();</div>
<div class="line">    uint32_t buffer_sz = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_a5249afad2e4d9b92e843da6b0d089926.html#a5249afad2e4d9b92e843da6b0d089926">MayaFlux::Config::get_buffer_size</a>();</div>
<div class="line">    uint32_t out_channels = <a class="code hl_function" href="namespaceMayaFlux_1_1Config_aea5cc2f1c8447b25797ca248da512ff0.html#aea5cc2f1c8447b25797ca248da512ff0">MayaFlux::Config::get_num_out_channels</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use these values to initialize your nodes correctly</span></div>
<div class="line">    <span class="keyword">auto</span> sine = vega.sine(440.0).channel(0) | Audio;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_a5249afad2e4d9b92e843da6b0d089926_html_a5249afad2e4d9b92e843da6b0d089926"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_a5249afad2e4d9b92e843da6b0d089926.html#a5249afad2e4d9b92e843da6b0d089926">MayaFlux::Config::get_buffer_size</a></div><div class="ttdeci">uint32_t get_buffer_size()</div><div class="ttdoc">Gets the buffer size from the default engine.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00054">Config.cpp:54</a></div></div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_ad8c6968db02415b5ba48863063076989_html_ad8c6968db02415b5ba48863063076989"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_ad8c6968db02415b5ba48863063076989.html#ad8c6968db02415b5ba48863063076989">MayaFlux::Config::get_sample_rate</a></div><div class="ttdeci">uint32_t get_sample_rate()</div><div class="ttdoc">Gets the sample rate from the default engine.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00045">Config.cpp:45</a></div></div>
<div class="ttc" id="anamespaceMayaFlux_1_1Config_aea5cc2f1c8447b25797ca248da512ff0_html_aea5cc2f1c8447b25797ca248da512ff0"><div class="ttname"><a href="namespaceMayaFlux_1_1Config_aea5cc2f1c8447b25797ca248da512ff0.html#aea5cc2f1c8447b25797ca248da512ff0">MayaFlux::Config::get_num_out_channels</a></div><div class="ttdeci">uint32_t get_num_out_channels()</div><div class="ttdoc">Gets the number of output channels from the default engine.</div><div class="ttdef"><b>Definition</b> <a href="Config_8cpp_source.html#l00063">Config.cpp:63</a></div></div>
</div><!-- fragment --><p>But <b>don't try to modify</b> <code>settings()</code> values in <code>compose()</code>—they won't take effect until next restart. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
